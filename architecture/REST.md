# REST 

`REST(REpresentational State Transfer)`는 **자원을 정의하고 자원에 대한 주소를 지정하는 방법을 일컫는 네트워크 아키텍처 원리의 모음**입니다. 

간단히 말해서 **서버는 클라이언트에게 자원에 대한 일관된 인터페이스를 제공하여 내부구조를 몰라도 자원에 대한 요청을 할 수 있는 아키텍쳐**입니다.

REST의 원리를 따르는 시스템을 `RESTful` 시스템이라 합니다.

## REST 아키텍처의 6가지 제한 조건
1. **Client/Server 구조**: 아키텍처를 단순화시키고 작은 단위로 분리함으로써 클라이언트-서버의 각 파트가 독립적으로 개선될 수 있도록 해줍니다. 
2. **인터페이스 일관성**: 서버와 클라이언트는 일관된 인터페이스로 분리되어야 합니다. 인터페이스는 요청 URI를 의미합니다.
3. **Stateless**: 각 요청 간 클라이언트의 상태가 서버에 저장되어서는 안됩니다. (HTTP)
4. **Cacheable**: 클라이언트는 응답을 캐싱할 수 있어야 합니다.
5. **Layered System**: 필요시 중간 서버를 두어 로드 밸런싱이나 공유 캐시 기능을 제공함으로써 시스템 규모 확정성을 향상시킬 수 있어야 합니다.
6. **Code on demand(optional)**: 클라이언트가 실행시킬 수 있는 로직(ex.javascript)을 전송하여 기능을 확장 시킬 수 있습니다. 필수는 아닙니다.

6가지 조건이 있지만 가장 중요한 3가지는 `1번`, `2번`, `3번`입니다.

클라이언트와 서버가 분리되는 기능을하고 클라이언트와 서버는 일관된 인터페이스와 Stateless한 통신으로 이루어져야 합니다.

그리함으로써 다음과 같은 장점을 얻을 수 있습니다.

1. 클라이언트와 서버는 독립적으로 발전할 수 있습니다.
2. 일관된 인터페이스는 서버의 내부구조를 몰라도 되기 때문에 클라이언트 쪽의 개발 편의를 제공하고 항상 같은 자원에 대한 동작을 한다는 것을 보장합니다.
3. 통신은 Stateless 하기 때문에 서버를 Scale-out 할 수 있게 합니다. 

## REST 인터페이스의 원칙에 대한 가이드

1. **Resource identification in requests:** 클라이언트 요청(URI)만으로 원하는 리소스가 식별되어야 합니다.
2. **Resource manipulation through representations:** 서버로부터 받은 자원의 표현(ex. JSON 응답 메시지)에는 해당 자원을 CRUD 요청하기에 충분한 데이터가 들어있어야 합니다.
3. **Self-descriptive message:** 메시지에는 자신이 가진 데이터에 대한 처리 방법이 설명되어 있어야 합니다. 예를 들어 미디어 타입을 정의하여 Parser까지 알 수 있도록 하던가, 명세를 확인할 수 있는 링크를 포함하는 것을 말합니다. 
4. **Hypermedia as the engine of application state(HATEOAS):** 애플리케이션의 상태는 Hyperlink를 이용해서 전이가 되어야 합니다. 
예를 들면 게시글에 대한 단일 조회 상태에서 게시글의 세부 정보를 조회하거나 작성자의 정보를 보는 식으로 접근 가능한 자원들을 hyperlink로 알려줘야 합니다.

#### 1번, 2번

1번과 2번의 내용을 종합하면 요청 URI만으로 원하는 자원이 식별가능해야 하며 응답에는 해당 자원을 조작하기에 충분한 데이터를 포함해야 한다는 것입니다.

REST에서는 요청 URI를 자원에 집중하여 표현합니다. 예를 들어 사용자 id 1인 사람의 정보를 요청한다면 URI는 다음과 같습니다.

```
	/users/1
```

사용자 컬렉션인 users중 id가 1인 자원에 대한 요청입니다. 이렇게 **명사와 identification으로 자원을 지정**하는 것이 기본입니다. 

**그러면 서버는 이 요청이 id 1인 사용자의 정보를 달라는 건지 삭제를 해달라는 건지 어떻게 알 수 있을까요?**

그걸 구분할 수 있도록 HTTP Method를 사용합니다.

```
	GET, /users/1  		-- id가 1인 사용자의 정보를 주세요.
	POST, /users   		-- 사용자를 추가 해주세요.
	DELETE, /users/1	-- id가 1인 사용자를 삭제해 주세요.
	PUT, /users/1		-- id가 1인 사용자의 정보를 수정해 주세요.
```

#### 4번

`HATEOAS`는 생소한 사람이 많을 것 같다. 의미는 응답 메시지에 해당 자원으로 요청 할 수 있는 API 를 링크로 같이 보내라는 것입니다.

**왜 필요할까요?** 

HATEOAS를 충분히 활용하여 클라이언트가 응답 메시지의 하이퍼링크를 그대로 사용하여 구현되어 있을 때, **URI 수정이 발생하더라도 클라이언트 사이드의 수정은 발생하지 않습니다.**

이렇게 함으로써 클라이언트와 서버가 논리적으로도 더 느슨한 결합을 갖을 수 있게됩니다.

## 참고
- [ecsimsw 블로그](https://ecsimsw.tistory.com/entry/REST-API-Self-descriptive%EC%99%80-HATEOS-%EB%8C%80%EB%B6%80%EB%B6%84-%EB%AA%BB-%EC%A7%80%ED%82%A4%EA%B3%A0-%EC%9E%88%EB%8A%94-%EC%A0%9C%EC%95%BD%EC%A1%B0%EA%B1%B4)
- [위키피디아](https://en.wikipedia.org/wiki/Representational_state_transfer)
- [codecademy](https://www.codecademy.com/article/what-is-rest)